# AutoApp UI Map & Intelligent Flow Engine - Environment Configuration Template
# Copy this file to .env and customize values for your environment

# =============================================================================
# CORE SYSTEM CONFIGURATION
# =============================================================================

# Enable/disable system components
ENABLE_DISCOVERY=true
DISCOVERY_PANEL=true
GPS_PANEL=false

# =============================================================================
# STORAGE PATHS & ARTIFACT LOCATIONS
# =============================================================================

# Graph and flow storage directories
GRAPH_ROOT=/app/data/graphs
FLOW_ROOT=/app/data/flows
SESSIONS_DIR=/app/data/sessions
SCREENSHOTS_DIR=/app/data/screenshots

# Specific graph files
GRAPH_PATH=/app/data/graph.json
GRAPH_STATE_LIMIT=500
GRAPH_TRANSITION_LIMIT=2000

# =============================================================================
# ANDROID ADB & UIAUTOMATOR2 CONFIGURATION
# =============================================================================

# ADB connection settings
ADB_HOST=host.docker.internal
ADB_PORT=5555
ANDROID_SERIAL=emulator-5554
ADB_TIMEOUT=30000

# UIAutomator2 configuration
UIAUTOMATOR2_TIMEOUT=15000
UI_CAPTURE_TIMEOUT=10000
UIXML_TMP=/tmp/view.xml

# State deduplication and merging
STATE_DEDUP_THRESHOLD=0.9
MERGE_THRESHOLD=0.9

# =============================================================================
# FLOW EXECUTION CONFIGURATION
# =============================================================================

# Flow execution timeouts and retry limits
REPLAY_RETRY_LIMIT=3
REPLAY_STEP_TIMEOUT=30000
FLOW_EXECUTION_TIMEOUT=300000
FLOW_VALIDATION_TIMEOUT=5000

# State detection and recovery
STATE_DETECTION_TIMEOUT=5000
STATE_RECOVERY_TIMEOUT=15000
RECOVERY_MAX_ATTEMPTS=2

# =============================================================================
# WEBRTC STREAMING CONFIGURATION
# =============================================================================

# WebRTC connection settings
WEBRTC_TIMEOUT=30000
WEBRTC_ICE_TIMEOUT=10000
WEBRTC_RECONNECTION_ATTEMPTS=3

# WebRTC quality settings
WEBRTC_RESOLUTION=720p
WEBRTC_FRAME_RATE=15
WEBRTC_BITRATE=2000

# =============================================================================
# MAYNDRIVE APP CONFIGURATION
# =============================================================================

# MaynDrive app identification
MAYNDRIVE_PACKAGE=com.mayn.mayndrive
MAYNDRIVE_MAIN_ACTIVITY=com.mayn.mayndrive.MainActivity
MAYNDRIVE_LOGIN_ACTIVITY=com.mayn.mayndrive.LoginActivity

# MaynDrive flow configuration
MAYNDRIVE_LOGIN_FLOW=flows/login.json
MAYNDRIVE_UNLOCK_FLOW=flows/unlock.json
MAYNDRIVE_LOCK_FLOW=flows/lock.json

# =============================================================================
# EXTERNAL EMULATOR CONFIGURATION
# =============================================================================

# External emulator connection
EXTERNAL_EMULATOR_HOST=host.docker.internal
EXTERNAL_EMULATOR_ADB_PORT=5555
EMULATOR_GRPC_ENDPOINT=http://envoy:8080
EMULATOR_WEBRTC_PUBLIC_URL=http://82.165.175.97:9000
EMULATOR_WEBRTC_ICE_SERVERS=stun:stun.l.google.com:19302,stun:stun1.l.google.com:19302

# =============================================================================
# PERFORMANCE TUNING PARAMETERS
# =============================================================================

# Snapshot and capture performance
SNAPSHOT_TIMEOUT_MS=5000
SNAPSHOT_BATCH_SIZE=10
CAPTURE_CONCURRENT_LIMIT=3

# Graph processing performance
GRAPH_VALIDATION_TIMEOUT=2000
GRAPH_PATHFINDING_TIMEOUT=1000
STATE_COMPARISON_CACHE_SIZE=1000

# Memory and resource limits
MAX_SESSION_MEMORY_MB=512
MAX_GRAPH_LOAD_TIME=5000
CONCURRENT_FLOW_LIMIT=5

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Log levels and output
LOG_LEVEL=info
LOG_FORMAT=json
LOG_OUTPUT=console
LOG_FILE_PATH=/app/logs/autoapp.log

# Component-specific log levels
FLOW_ENGINE_LOG_LEVEL=info
GRAPH_LOG_LEVEL=warn
REPLAY_LOG_LEVEL=info
WEBRTC_LOG_LEVEL=error

# Session and debug logging
SESSION_LOG_RETENTION_DAYS=7
DEBUG_SCREENSHOT_CAPTURE=false
DETAILED_STATE_LOGGING=false

# =============================================================================
# API CONFIGURATION
# =============================================================================

# Flow management API
FLOW_API_PORT=8080
FLOW_API_PREFIX=/api/v1
FLOW_API_TIMEOUT=30000

# API security and access
API_AUTH_ENABLED=false
API_CORS_ORIGIN=*
API_RATE_LIMIT=100

# =============================================================================
# SECURITY & AUTHENTICATION
# =============================================================================

# ADB key authentication
ADBKEY=

# Security settings
ALLOW_EXTERNAL_ADB=false
REQUIRE_DEVICE_AUTH=false
SESSION_TIMEOUT=3600

# =============================================================================
# DEVELOPMENT & DEBUGGING
# =============================================================================

# Development mode settings
DEV_MODE=false
DEBUG_GRAPH_EXPORTS=false
ENABLE_LLM_FLOW_ASSISTANCE=true

# Testing configuration
TEST_MODE=false
MOBT_ADB_RESPONSES=false
ENABLE_FLOW_VALIDATION=true

# =============================================================================
# ADVANCED CONFIGURATION
# =============================================================================

# Graph algorithms and heuristics
PATHFINDING_ALGORITHM=dijkstra
STATE_SIMILARITY_ALGORITHM=structural
ELEMENT_CONFIDENCE_THRESHOLD=0.8

# Machine learning and AI features
ENABLE_SEMANTIC_SELECTORS=true
ENABLE_STATE_PREDICTION=false
ML_MODEL_PATH=/app/models/

# Backup and recovery
AUTO_BACKUP_ENABLED=true
BACKUP_INTERVAL_HOURS=24
BACKUP_RETENTION_DAYS=30